<!-- Page generated 2020-07-16 21:49:37 +0900 -->
<!-- Logic for 'edit this button'


    

    

    

    

    

    

    

    

-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style type="text/css">
      @charset "UTF-8";
      [ng\:cloak],
      [ng-cloak],
      [data-ng-cloak],
      [x-ng-cloak],
      .ng-cloak,
      .x-ng-cloak,
      .ng-hide:not(.ng-hide-animate) {
          display: none !important;
      }

      ng\:form {
          display: block;
      }
  </style>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>

  
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <!-- metadata -->
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2020-07-16T21:49:37+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:title" itemprop="title name" content="Logs and troubleshooting"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="This page contains information on how to diagnose and troubleshoot Docker Desktop issues, send logs and communicate with the Docker Desktop team, use our forums and Success Center, browse and..." />
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker ドキュメント"/>
  <meta property="article:published_time" itemprop="datePublished" content="2020-07-16T21:49:37+09:00"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="mac, troubleshooting, logs, issues">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
  <link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

  <!-- Go get "Open Sans" font from Google -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <!-- SEO stuff -->
  <title>Logs and troubleshooting | Docker ドキュメント</title>
  <meta property="og:title" content="Logs and troubleshooting" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="description" content="Troubleshooting, logs, and known issues" />
  <meta property="og:description" content="Troubleshooting, logs, and known issues" />
  <link rel="canonical" href="/docker-for-mac/troubleshoot/" />
  <meta property="og:url" content="https://docs.docker.com/docker-for-mac/troubleshoot/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Logs and troubleshooting","description":"Troubleshooting, logs, and known issues","url":"https://docs.docker.com/docker-for-mac/troubleshoot/"}</script>
  <!-- END SEO STUFF -->
  
</head>


    <body ng-app="Docker" ng-controller="DockerController" class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs">
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs">
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div id="tabs">
        <ul class="tabs jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>

        </div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section">
                            
                            
                            <h1>Logs and troubleshooting</h1> 
                            <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    12 分
  
</span>

                            
                            <p>This page contains information on how to diagnose and troubleshoot Docker Desktop issues, send logs and communicate with the Docker Desktop team, use our forums and Success Center, browse and log issues on GitHub, and find workarounds for known problems.</p>

<h2 id="troubleshoot">Troubleshoot</h2>

<p>Choose <img src="/docs.docker.jp.onthefly/docker-for-mac/images/whale-x.png" alt="whale menu" class="inline" /> &gt; <strong>Troubleshoot</strong>
from the menu bar to see the troubleshoot options.</p>

<p><img src="/docs.docker.jp.onthefly/docker-for-mac/images/menu/troubleshoot.png" alt="Uninstall or reset Docker" width="750px" /></p>

<p>The Troubleshoot page contains the following options:</p>

<ul>
  <li>
    <p><strong>Restart Docker Desktop</strong>: Select to restart Docker Desktop.</p>
  </li>
  <li>
    <p><strong>Run Diagnostics</strong>: Select this option to diagnose any issues on Docker Desktop. For detailed information about diagnostics, see <a href="#diagnose-problems-send-feedback-and-create-github-issues">Diagnose problems, send feedback, and create GitHub issues</a>.</p>
  </li>
  <li>
    <p><strong>Reset Kubernetes cluster</strong>: Select this option to delete all stacks and Kubernetes resources. For more information, see <a href="/docker-for-mac/index/#kubernetes">Kubernetes</a>.</p>
  </li>
  <li>
    <p><strong>Reset disk image</strong>: This option resets all Docker data <em>without</em> a
reset to factory defaults. Selecting this option results in the loss of existing settings.</p>
  </li>
  <li>
    <p><strong>Reset to factory defaults</strong>: Choose this option to reset all options on
Docker Desktop to their initial state, the same as when Docker Desktop was first installed.</p>
  </li>
  <li>
    <p><strong>Uninstall</strong>: Choose this option to remove Docker Desktop from your
system.</p>
  </li>
</ul>

<blockquote>
  <p>Uninstall Docker Desktop from the command line</p>

  <p>To uninstall Docker Desktop from a terminal, run: <code class="highlighter-rouge">&lt;DockerforMacPath&gt;
--uninstall</code>. If your instance is installed in the default location, this
command provides a clean uninstall:</p>

  <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>/Applications/Docker.app/Contents/MacOS/Docker <span class="nt">--uninstall</span>
Docker is running, exiting...
Docker uninstalled successfully. You can move the Docker application to the trash.
</code></pre></div>  </div>
  <p>You might want to use the command-line uninstall if, for example, you find that
the app is non-functional, and you cannot uninstall it from the menu.</p>
</blockquote>

<h2 id="diagnose-problems-send-feedback-and-create-github-issues">Diagnose problems, send feedback, and create GitHub issues</h2>

<h3 id="in-app-diagnostics">In-app diagnostics</h3>

<p>If you encounter problems for which you do not find solutions in this
documentation, on <a href="https://github.com/docker/for-mac/issues">Docker Desktop issues on
GitHub</a>, or the <a href="https://forums.docker.com/c/docker-for-mac">Docker Desktop forum</a>, we can help you troubleshoot
the log data.</p>

<p>Choose <img src="/docs.docker.jp.onthefly/docker-for-mac/images/whale-x.png" alt="whale menu" class="inline" /> &gt; <strong>Troubleshoot</strong> &gt; <strong>Run Diagnostics</strong>.</p>

<p><img src="/docs.docker.jp.onthefly/docker-for-mac/images/diagnose-feedback.png" alt="Diagnose &amp; Feedback" width="600px" /></p>

<p>Once the diagnostics are available, you can upload them and obtain a
<strong>Diagnostic ID</strong>, which must be provided when communicating with the Docker
team. For more information on our policy regarding personal data, see
<a href="/docs.docker.jp.onthefly/docker-for-mac/faqs/#how-is-personal-data-handled-in-docker-desktop">how is personal data handled in Docker Desktop</a>.</p>

<p><img src="/docs.docker.jp.onthefly/docker-for-mac/images/diagnose-feedback-id.png" alt="Diagnostics &amp; Feedback with ID" width="600px" /></p>

<p>If you click <strong>Report an issue</strong>, this opens Docker Desktop <a href="https://github.com/docker/for-mac/issues/">for Mac</a> issues on GitHub in your web browser in a “New issue” template. Add the details before submitting the issue. Do not forget to copy/paste your diagnostic ID.</p>

<h3 id="diagnosing-from-the-terminal">Diagnosing from the terminal</h3>

<p>In some cases, it is useful to run the diagnostics yourself, for instance, if
Docker Desktop cannot start.</p>

<p>First, locate the <code class="highlighter-rouge">com.docker.diagnose</code> tool.  If you have installed Docker Desktop in the Applications directory, then it is located at
<code class="highlighter-rouge">/Applications/Docker.app/Contents/MacOS/com.docker.diagnose</code>.</p>

<p>To create <em>and upload</em> diagnostics, run:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>/Applications/Docker.app/Contents/MacOS/com.docker.diagnose gather <span class="nt">-upload</span>
</code></pre></div></div>

<p>After the diagnostics have finished, you should have the following output,
containing your diagnostics ID:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Diagnostics Bundle: /tmp/B8CF8400-47B3-4068-ADA4-3BBDCE3985D9/20190726143610.zip
Diagnostics ID:     B8CF8400-47B3-4068-ADA4-3BBDCE3985D9/20190726143610 <span class="o">(</span>uploaded<span class="o">)</span>
Diagnostics Bundle: /tmp/BE9AFAAF-F68B-41D0-9D12-84760E6B8740/20190905152051.zip
Diagnostics ID:     BE9AFAAF-F68B-41D0-9D12-84760E6B8740/20190905152051 <span class="o">(</span>uploaded<span class="o">)</span>
</code></pre></div></div>

<p>The diagnostics ID (here BE9AFAAF-F68B-41D0-9D12-84760E6B8740/20190905152051) is
composed of your user ID (BE9AFAAF-F68B-41D0-9D12-84760E6B8740) and a timestamp
(20190905152051). Ensure you provide the full diagnostics ID, and not just the user ID.</p>

<p>To view the contents of the diagnostic file, run:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>open /tmp/BE9AFAAF-F68B-41D0-9D12-84760E6B8740/20190905152051.zip
</code></pre></div></div>

<p><a name="logs"></a></p>
<h2 id="check-the-logs">Check the logs</h2>

<p>In addition to using the diagnose and feedback option to submit logs, you can
browse the logs yourself.  The following documentation is about macOS 10.12
onwards; for older versions, see
<a href="https://github.com/docker/docker.github.io/blob/v17.12/docker-for-mac/troubleshoot.md#check-the-logs">older documentation</a>.</p>

<h4 id="in-a-terminal">In a terminal</h4>

<p>To watch the live flow of Docker Desktop logs in the command line, run the following script from your favorite shell.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ pred</span><span class="o">=</span><span class="s1">'process matches ".*(ocker|vpnkit).*"
  || (process in {"taskgated-helper", "launchservicesd", "kernel"} &amp;&amp; eventMessage contains[c] "docker")'</span>
<span class="nv">$ </span>/usr/bin/log stream <span class="nt">--style</span> syslog <span class="nt">--level</span><span class="o">=</span>debug <span class="nt">--color</span><span class="o">=</span>always <span class="nt">--predicate</span> <span class="s2">"</span><span class="nv">$pred</span><span class="s2">"</span>
</code></pre></div></div>

<p>Alternatively, to collect the last day of logs (<code class="highlighter-rouge">1d</code>) in a file, run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ /usr/bin/log show --debug --info --style syslog --last 1d --predicate "$pred" &gt;/tmp/logs.txt
</code></pre></div></div>

<h4 id="in-the-console-app">In the Console app</h4>

<p>Macs provide a built-in log viewer, named “Console”, which you can use to check
Docker logs.</p>

<p>The Console lives in <code class="highlighter-rouge">/Applications/Utilities</code>; you can search for it with
Spotlight Search.</p>

<p>To read the Docker app log messages, type <code class="highlighter-rouge">docker</code> in the Console window search bar and press Enter. Then select <code class="highlighter-rouge">ANY</code> to expand the drop-down list next to your <code class="highlighter-rouge">docker</code> search entry, and select <code class="highlighter-rouge">Process</code>.</p>

<p><img src="/docs.docker.jp.onthefly/docker-for-mac/images/console.png" alt="Mac Console search for Docker app" /></p>

<p>You can use the Console Log Query to search logs, filter the results in various
ways, and create reports.</p>

<p><a name="troubleshoot"></a></p>
<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="make-sure-certificates-are-set-up-correctly">Make sure certificates are set up correctly</h3>

<p>Docker Desktop ignores certificates listed under insecure registries, and does
not send client certificates to them. Commands like <code class="highlighter-rouge">docker run</code> that attempt to
pull from the registry produces error messages on the command line, for example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error response from daemon: Get http://192.168.203.139:5858/v2/: malformed HTTP response "\x15\x03\x01\x00\x02\x02"
</code></pre></div></div>

<p>As well as on the registry. For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2019/06/20 18:15:30 http: TLS handshake error from 192.168.203.139:52882: tls: client didn't provide a certificate
2019/06/20 18:15:30 http: TLS handshake error from 192.168.203.139:52883: tls: first record does not look like a TLS handshake
</code></pre></div></div>

<p>For more about using client and server side certificates, see
<a href="/docs.docker.jp.onthefly/docker-for-mac/#add-tls-certificates">Adding TLS certificates</a> in the Getting Started topic.</p>

<h3 id="docker-desktop-does-not-start-if-mac-user-account-and-home-folder-are-renamed-after-installing-the-app">Docker Desktop does not start if Mac user account and home folder are renamed after installing the app</h3>

<p>See
<a href="/docs.docker.jp.onthefly/docker-for-mac/faqs/#do-i-need-to-reinstall-docker-for-mac-if-i-change-the-name-of-my-macos-account">Do I need to reinstall Docker Desktop if I change the name of my macOS account?</a>
in the FAQs.</p>

<h3 id="volume-mounting-requires-file-sharing-for-any-project-directories-outside-of-users">Volume mounting requires file sharing for any project directories outside of <code class="highlighter-rouge">/Users</code></h3>

<p>If you are using mounted volumes and get runtime errors indicating an
application file is not found, access to a volume mount is denied, or a service
cannot start, such as when using <a href="/docs.docker.jp.onthefly/compose/gettingstarted/">Docker Compose</a>,
you might need to enable <a href="/docs.docker.jp.onthefly/docker-for-mac/#file-sharing">file sharing</a>.</p>

<p>Volume mounting requires shared drives for projects that live outside of the
<code class="highlighter-rouge">/Users</code> directory. Go to <img src="/docs.docker.jp.onthefly/docker-for-mac/images/whale-x.png" alt="whale menu" class="inline" /> &gt;
<strong>Preferences</strong> &gt; <strong>Resources</strong> &gt; <strong>File sharing</strong> and share the drive that contains the Dockerfile and volume.</p>

<h3 id="incompatible-cpu-detected">Incompatible CPU detected</h3>

<p>Docker Desktop requires a processor (CPU) that supports virtualization and, more
specifically, the <a href="https://developer.apple.com/library/mac/documentation/DriversKernelHardware/Reference/Hypervisor/">Apple Hypervisor
framework</a>.
Docker Desktop is only compatible with Mac systems that have a CPU that supports the Hypervisor framework. Most Macs built in 2010 and later support it,as described in the Apple Hypervisor Framework documentation about supported hardware:</p>

<p><em>Generally, machines with an Intel VT-x feature set that includes Extended Page
Tables (EPT) and Unrestricted Mode are supported.</em></p>

<p>To check if your Mac supports the Hypervisor framework, run the following command in a terminal window.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sysctl kern.hv_support
</code></pre></div></div>

<p>If your Mac supports the Hypervisor Framework, the command prints
<code class="highlighter-rouge">kern.hv_support: 1</code>.</p>

<p>If not, the command prints <code class="highlighter-rouge">kern.hv_support: 0</code>.</p>

<p>See also, <a href="https://developer.apple.com/library/mac/documentation/DriversKernelHardware/Reference/Hypervisor/">Hypervisor Framework
Reference</a>
in the Apple documentation, and Docker Desktop <a href="/docs.docker.jp.onthefly/docker-for-mac/install/#system-requirements">Mac system requirements</a>.</p>

<h3 id="workarounds-for-common-problems">Workarounds for common problems</h3>

<ul>
  <li>
    <p>If Docker Desktop fails to install or start properly on Mac:</p>

    <ul>
      <li>
        <p>Make sure you quit Docker Desktop before installing a new version of the
application (<img src="/docs.docker.jp.onthefly/docker-for-mac/images/whale-x.png" alt="whale menu" class="inline" /> &gt; <strong>Quit Docker Desktop</strong>). Otherwise, you get an “application in use” error when you try to
copy the new app from the <code class="highlighter-rouge">.dmg</code> to <code class="highlighter-rouge">/Applications</code>.</p>
      </li>
      <li>
        <p>Restart your Mac to stop / discard any vestige of the daemon running from
the previously installed version.</p>
      </li>
      <li>
        <p>Run the uninstall commands from the menu.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>If <code class="highlighter-rouge">docker</code> commands aren’t working properly or as expected, you may need to
unset some environment variables, to make sure you are not using the legacy
Docker Machine environment in your shell or command window. Unset the
<code class="highlighter-rouge">DOCKER_HOST</code> environment variable and related variables.</p>

    <ul>
      <li>
        <p>If you use bash, use the following command: <code class="highlighter-rouge">unset ${!DOCKER_*}</code></p>
      </li>
      <li>
        <p>For other shells, unset each environment variable individually as described
in <a href="/docs.docker.jp.onthefly/docker-for-mac/docker-toolbox/#setting-up-to-run-docker-desktop-on-mac">Setting up to run Docker Desktop on Mac</a>
in <a href="/docs.docker.jp.onthefly/docker-for-mac/docker-toolbox/">Docker Desktop on Mac vs. Docker Toolbox</a>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Network connections fail if the macOS Firewall is set to “Block all incoming
connections”. You can enable the firewall, but <code class="highlighter-rouge">bootpd</code> must be allowed
incoming connections so that the VM can get an IP address.</p>
  </li>
  <li>
    <p>For the <code class="highlighter-rouge">hello-world-nginx</code> example, Docker Desktop must be running to get to
the web server on <code class="highlighter-rouge">http://localhost/</code>. Make sure that the Docker icon is
displayed on the menu bar, and that you run the Docker commands in a shell that is connected to the Docker Desktop Engine (not Engine from Toolbox).
Otherwise, you might start the webserver container but get a “web page not
available” error when you go to <code class="highlighter-rouge">localhost</code>. For more information on distinguishing between the two environments, see <a href="/docs.docker.jp.onthefly/docker-for-mac/docker-toolbox/">Docker Desktop on Mac vs. Docker Toolbox</a>.</p>
  </li>
  <li>
    <p>If you see errors like <code class="highlighter-rouge">Bind for 0.0.0.0:8080 failed: port is already
allocated</code> or <code class="highlighter-rouge">listen tcp:0.0.0.0:8080: bind: address is already in use</code>:</p>

    <ul>
      <li>
        <p>These errors are often caused by some other software on the Mac using those
ports.</p>
      </li>
      <li>
        <p>Run <code class="highlighter-rouge">lsof -i tcp:8080</code> to discover the name and pid of the other process and
decide whether to shut the other process down, or to use a different port in
your docker app.</p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="known-issues">Known issues</h2>

<ul>
  <li>
    <p>IPv6 is not (yet) supported on Docker Desktop.</p>
  </li>
  <li>
    <p>You might encounter errors when using <code class="highlighter-rouge">docker-compose up</code> with Docker Desktop
(<code class="highlighter-rouge">ValueError: Extra Data</code>). We’ve identified this is likely related to data
and/or events being passed all at once rather than one by one, so sometimes
the data comes back as 2+ objects concatenated and causes an error.</p>
  </li>
  <li>
    <p>Force-ejecting the <code class="highlighter-rouge">.dmg</code> after running <code class="highlighter-rouge">Docker.app</code> from it can cause the
whale icon to become unresponsive, Docker tasks to show as not responding in
the Activity Monitor, and for some processes to consume a large amount of CPU
resources. Reboot and restart Docker to resolve these issues.</p>
  </li>
  <li>
    <p>Docker does not auto-start on login even when it is enabled in
<img src="/docs.docker.jp.onthefly/docker-for-mac/images/whale-x.png" alt="whale menu" class="inline" /> &gt; <strong>Preferences</strong>. This is related to a
set of issues with Docker helper, registration, and versioning.</p>
  </li>
  <li>
    <p>Docker Desktop uses the <code class="highlighter-rouge">HyperKit</code> hypervisor
(https://github.com/docker/hyperkit) in macOS 10.10 Yosemite and higher. If
you are developing with tools that have conflicts with <code class="highlighter-rouge">HyperKit</code>, such as
<a href="https://software.intel.com/en-us/android/articles/intel-hardware-accelerated-execution-manager/">Intel Hardware Accelerated Execution Manager
(HAXM)</a>,
the current workaround is not to run them at the same time. You can pause
<code class="highlighter-rouge">HyperKit</code> by quitting Docker Desktop temporarily while you work with HAXM.
This allows you to continue work with the other tools and prevent <code class="highlighter-rouge">HyperKit</code>
from interfering.</p>
  </li>
  <li>
    <p>If you are working with applications like <a href="https://maven.apache.org/">Apache
Maven</a> that expect settings for <code class="highlighter-rouge">DOCKER_HOST</code> and
<code class="highlighter-rouge">DOCKER_CERT_PATH</code> environment variables, specify these to connect to Docker
instances through Unix sockets. For example:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">DOCKER_HOST</span><span class="o">=</span>unix:///var/run/docker.sock
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">docker-compose</code> 1.7.1 performs DNS unnecessary lookups for
<code class="highlighter-rouge">localunixsocket.local</code> which can take 5s to timeout on some networks. If
<code class="highlighter-rouge">docker-compose</code> commands seem very slow but seem to speed up when the network
is disabled, try appending <code class="highlighter-rouge">127.0.0.1 localunixsocket.local</code> to the file
<code class="highlighter-rouge">/etc/hosts</code>.  Alternatively you could create a plain-text TCP proxy on
localhost:1234 using:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -d -v /var/run/docker.sock:/var/run/docker.sock -p 127.0.0.1:1234:1234 bobrik/socat TCP-LISTEN:1234,fork UNIX-CONNECT:/var/run/docker.sock
</code></pre></div>    </div>

    <p>and then <code class="highlighter-rouge">export DOCKER_HOST=tcp://localhost:1234</code>.</p>
  </li>
</ul>

<p><a name="bind-mounted-dirs"></a></p>

<ul>
  <li>
    <p>There are a number of issues with the performance of directories bind-mounted
with <code class="highlighter-rouge">osxfs</code>. In particular, writes of small blocks, and traversals of large
directories are currently slow. Additionally, containers that perform large
numbers of directory operations, such as repeated scans of large directory
trees, may suffer from poor performance. Applications that behave in this way
include:</p>

    <ul>
      <li><code class="highlighter-rouge">rake</code></li>
      <li><code class="highlighter-rouge">ember build</code></li>
      <li>Symfony</li>
      <li>Magento</li>
      <li>Zend Framework</li>
      <li>PHP applications that use <a href="https://getcomposer.org">Composer</a> to install
dependencies in a <code class="highlighter-rouge">vendor</code> folder<br /><br /></li>
    </ul>

    <p>As a work-around for this behavior, you can put vendor or third-party library
directories in Docker volumes, perform temporary file system operations
outside of <code class="highlighter-rouge">osxfs</code> mounts, and use third-party tools like Unison or <code class="highlighter-rouge">rsync</code> to
synchronize between container directories and bind-mounted directories. We are
actively working on <code class="highlighter-rouge">osxfs</code> performance using a number of different
techniques.  To learn more, see the topic on
<a href="/docs.docker.jp.onthefly/docker-for-mac/osxfs/#performance-issues-solutions-and-roadmap">Performance issues, solutions, and roadmap</a>.</p>
  </li>
  <li>
    <p>If your system does not have access to an NTP server, then after a hibernate
the time seen by Docker Desktop may be considerably out of sync with the host.
Furthermore, the time may slowly drift out of sync during use. To manually
reset the time after hibernation, run:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--rm</span> <span class="nt">--privileged</span> alpine hwclock <span class="nt">-s</span>
</code></pre></div>    </div>

    <p>Or, to resolve both issues, you can add the local clock as a low-priority
(high stratum) fallback NTP time source for the host. To do this, edit the
host’s <code class="highlighter-rouge">/etc/ntp-restrict.conf</code> to add:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server 127.127.1.1              # LCL, local clock
fudge  127.127.1.1 stratum 12   # increase stratum
</code></pre></div>    </div>

    <p>Then restart the NTP service with:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>launchctl unload /System/Library/LaunchDaemons/org.ntp.ntpd.plist
<span class="nb">sudo </span>launchctl load /System/Library/LaunchDaemons/org.ntp.ntpd.plist
</code></pre></div>    </div>
  </li>
</ul>

                            <!-- tags -->
                            
                            <span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span
                                style="vertical-align: 2px"><a
                                    href="https://docs.docker.com/search/?q=mac">mac</a>, <a
                                    href="https://docs.docker.com/search/?q=troubleshooting">troubleshooting</a>, <a
                                    href="https://docs.docker.com/search/?q=logs">logs</a>, <a
                                    href="https://docs.docker.com/search/?q=issues">issues</a></span>
                            
                            
                            <div id="ratings-div"
                                style="color:#b9c2cc; text-align: center; margin-top: 150px;">
                                <div id="pd_rating_holder_8453675"></div>
                                <script type="text/javascript">
                                    PDRTJS_settings_8453675 = {
                                        "id": "8453675",
                                        "unique_id": "docker-for-mac/troubleshoot.md",
                                        "title": "Logs and troubleshooting",
                                        "permalink": "https://github.com/docker/docker.github.io/blob/oligarch/docker-for-mac/troubleshoot.md"
                                    };
                                    (function (d, c, j) {
                                        if (!document.getElementById(j)) {
                                            var pd = d.createElement(c),
                                                s;
                                            pd.id = j;
                                            pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
                                            s = document.getElementsByTagName(c)[0];
                                            s.parentNode.insertBefore(pd, s);
                                        }
                                    }(document, 'script', 'pd-rating-js'));
                                </script>
                            </div>
                            
                        </section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
    <ul class="nav jsTOCHorizontal hidden-md hidden-lg">
    </ul>
    <div class="divider hidden-md hidden-lg"></div>
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul>
                                        
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/docker-for-mac/troubleshoot.md"><i
                                                    class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/issues/new?body=ファイル: [docker-for-mac/troubleshoot.md](https://matsuand.github.io/docs.docker.jp.onthefly/docker-for-mac/troubleshoot/)"
                                                class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
                                        <!-- toggle mode -->
                                        <li>
                                            <div class="toggle-mode">
                                                <div class="icon">
                                                    <i class="fa fa-sun-o" aria-hidden="true"></i>
                                                </div>
                                                <div class="toggle-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" id="switch-style">
                                                        <div class="slider round"></div>
                                                    </label>
                                                </div>
                                                <div class="icon">
                                                    <i class="fa fa-moon-o" aria-hidden="true"></i>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                
                                
                                
                                
                                <div id="side-toc-title">本ページ内:</div>
                                
<ul id="my_toc" class="inline_toc">
  <li><a href="#troubleshoot" class="nomunge">Troubleshoot</a></li>
  <li><a href="#diagnose-problems-send-feedback-and-create-github-issues" class="nomunge">Diagnose problems, send feedback, and create GitHub issues</a>
    <ul>
      <li><a href="#in-app-diagnostics" class="nomunge">In-app diagnostics</a></li>
      <li><a href="#diagnosing-from-the-terminal" class="nomunge">Diagnosing from the terminal</a></li>
    </ul>
  </li>
  <li><a href="#check-the-logs" class="nomunge">Check the logs</a></li>
  <li><a href="#troubleshooting" class="nomunge">Troubleshooting</a>
    <ul>
      <li><a href="#make-sure-certificates-are-set-up-correctly" class="nomunge">Make sure certificates are set up correctly</a></li>
      <li><a href="#docker-desktop-does-not-start-if-mac-user-account-and-home-folder-are-renamed-after-installing-the-app" class="nomunge">Docker Desktop does not start if Mac user account and home folder are renamed after installing the app</a></li>
      <li><a href="#volume-mounting-requires-file-sharing-for-any-project-directories-outside-of-users" class="nomunge">Volume mounting requires file sharing for any project directories outside of /Users</a></li>
      <li><a href="#incompatible-cpu-detected" class="nomunge">Incompatible CPU detected</a></li>
      <li><a href="#workarounds-for-common-problems" class="nomunge">Workarounds for common problems</a></li>
    </ul>
  </li>
  <li><a href="#known-issues" class="nomunge">Known issues</a></li>
</ul>


                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker?</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container?</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Play with Docker</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2020 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
    
    <script>var pageURL = "/docker-for-mac/troubleshoot/";</script>
    <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
    <script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
    <script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
    <script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
    <script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
    <script defer src="/js/search.js"></script>
</body>


</html>
