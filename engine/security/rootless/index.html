<!-- Page generated 2020-07-16 21:49:37 +0900 -->
<!-- Logic for 'edit this button'


    

    

    

    

    

    

    

    

-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style type="text/css">
      @charset "UTF-8";
      [ng\:cloak],
      [ng-cloak],
      [data-ng-cloak],
      [x-ng-cloak],
      .ng-cloak,
      .x-ng-cloak,
      .ng-hide:not(.ng-hide-animate) {
          display: none !important;
      }

      ng\:form {
          display: block;
      }
  </style>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>

  
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <!-- metadata -->
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2020-07-16T21:49:37+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:title" itemprop="title name" content="root ユーザー以外による Docker デーモン起動（rootless モード）"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="rootless モードとは、root 以外のユーザーによって Docker デーモンやコンテナーを起動するものであり、デーモンや起動コンテナーにおける潜在的なぜい弱性を軽減します。 rootless モードは root 権限を必要としません。 しかも 前提条件 を満たしていれば、Docker デーモンのインストール時も必要としません。 rootless モードは Docker Engine v19.03 から導入されました。 メモ rootless モードは試験的な機能であるため、制約がいくつかあります。 詳しくは 既知の問題 を参照してください。 どのように動作するか rootless モードは、Docker デーモンやコンテナーをユーザー名前空間の内部で実行します。 これは..." />
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker ドキュメント"/>
  <meta property="article:published_time" itemprop="datePublished" content="2020-07-16T21:49:37+09:00"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="security, namespaces, rootless">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
  <link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

  <!-- Go get "Open Sans" font from Google -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <!-- SEO stuff -->
  <title>root ユーザー以外による Docker デーモン起動（rootless モード） | Docker ドキュメント</title>
  <meta property="og:title" content="root ユーザー以外による Docker デーモン起動（rootless モード）" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="description" content="root ユーザー以外によって Docker デーモンを起動します（rootless モード）。" />
  <meta property="og:description" content="root ユーザー以外によって Docker デーモンを起動します（rootless モード）。" />
  <link rel="canonical" href="/engine/security/rootless/" />
  <meta property="og:url" content="https://docs.docker.com/engine/security/rootless/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"root ユーザー以外による Docker デーモン起動（rootless モード）","description":"root ユーザー以外によって Docker デーモンを起動します（rootless モード）。","url":"https://docs.docker.com/engine/security/rootless/"}</script>
  <!-- END SEO STUFF -->
  
</head>


    <body ng-app="Docker" ng-controller="DockerController" class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs">
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs">
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div id="tabs">
        <ul class="tabs jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>

        </div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section">
                            
                            
                            <h1>root ユーザー以外による Docker デーモン起動（rootless モード）</h1> 
                            <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    12 分
  
</span>

                            
                            
<p>rootless モードとは、root 以外のユーザーによって Docker デーモンやコンテナーを起動するものであり、デーモンや起動コンテナーにおける潜在的なぜい弱性を軽減します。</p>

<p>rootless モードは root 権限を必要としません。
しかも <a href="#prerequisites">前提条件</a> を満たしていれば、Docker デーモンのインストール時も必要としません。</p>

<p>rootless モードは Docker Engine v19.03 から導入されました。</p>

<blockquote>
  <p><strong>メモ</strong></p>

  <p>rootless モードは試験的な機能であるため、制約がいくつかあります。
詳しくは <a href="#known-limitations">既知の問題</a> を参照してください。</p>
</blockquote>

<h2 id="how-it-works">どのように動作するか</h2>

<p>rootless モードは、Docker デーモンやコンテナーをユーザー名前空間の内部で実行します。
これは <a href="/docs.docker.jp.onthefly/engine/security/userns-remap/"><code class="highlighter-rouge">userns-remap</code> モード</a> に非常によく似ています。
ただし <code class="highlighter-rouge">userns-remap</code> モードにおいては、デーモンだけは root 権限で起動します。
rootless モードの場合は、デーモンとコンテナーがそれぞれ root 権限なしに動作します。</p>

<p>rootless モードは、実行モジュールの <code class="highlighter-rouge">SETUID</code> ビットやファイルケーパビリティーは利用しません。
ただし <code class="highlighter-rouge">newuidmap</code> と <code class="highlighter-rouge">newgidmap</code> は利用します。
これらはユーザー名前空間内において、複数の UID/GID を利用するために必要となるものです。</p>

<h2 id="prerequisites">前提条件</h2>

<ul>
  <li>
    <p>ホスト上に <code class="highlighter-rouge">newuidmap</code> と <code class="highlighter-rouge">newgidmap</code> をインストールすることが必要です。
このコマンドは、たいていのディストリビューションにおいて <code class="highlighter-rouge">uidmap</code> パッケージとして提供されています。</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">/etc/subuid</code> と <code class="highlighter-rouge">/etc/subgid</code> では、ユーザーに対して最低でも 65,536 個のサブ UID/サブ GIDを許容しておくことが必要です。
以下の例において <code class="highlighter-rouge">testuser</code> ユーザーには 65,536 個のサブ UID/サブ GID (231072-296607) が与えられています。</p>
  </li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> id <span class="nt">-u</span>
<span class="go">1001
</span><span class="gp">$</span> whoami
<span class="go">testuser
</span><span class="gp">$</span> <span class="nb">grep</span> ^<span class="k">$(</span>whoami<span class="k">)</span>: /etc/subuid
<span class="go">testuser:231072:65536
</span><span class="gp">$</span> <span class="nb">grep</span> ^<span class="k">$(</span>whoami<span class="k">)</span>: /etc/subgid
<span class="go">testuser:231072:65536
</span></code></pre></div></div>

<h3 id="distribution-specific-hint">ディストリビューション固有の情報</h3>

<blockquote>
  <p>メモ: ここでは Ubuntu カーネルの利用をお勧めします。</p>
</blockquote>

<h4 id="ubuntu">Ubuntu</h4>

<ul>
  <li>
    <p>事前準備するものは何もありません。</p>
  </li>
  <li>
    <p>デフォルトで <code class="highlighter-rouge">overlay2</code> ストレージドライバーが有効になっています。
(<a href="https://kernel.ubuntu.com/git/ubuntu/ubuntu-bionic.git/commit/fs/overlayfs?id=3b7da90f28fe1ed4b79ef2d994c81efbc58f1144">Ubuntu 固有のカーネルパッチ</a>)</p>
  </li>
  <li>
    <p>Ubuntu 16.04、18.04、20.04 において動作します。</p>
  </li>
</ul>

<h4 id="debian-gnulinux">Debian GNU/Linux</h4>

<ul>
  <li>
    <p><code class="highlighter-rouge">/etc/sysctl.conf</code>（または <code class="highlighter-rouge">/etc/sysctl.d</code>）に <code class="highlighter-rouge">kernel.unprivileged_userns_clone=1</code> を追加して、<code class="highlighter-rouge">sudo sysctl --system</code> を実行してください。</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">overlay2</code> ストレージドライバー（推奨）を利用するには、<code class="highlighter-rouge">sudo modprobe overlay permit_mounts_in_userns=1</code> を実行してください。
 (<a href="https://salsa.debian.org/kernel-team/linux/blob/283390e7feb21b47779b48e0c8eb0cc409d2c815/debian/patches/debian/overlayfs-permit-mounts-in-userns.patch">Debian 固有のカーネルパッチ、Debian 10 において導入</a>)
 そして <code class="highlighter-rouge">/etc/modprobe.d</code> に設定を追加してください。</p>
  </li>
  <li>
    <p>Debian 9 と 10 において動作します。
<code class="highlighter-rouge">overlay2</code> がサポートされるのは Debian 10 からであり、上に示した <code class="highlighter-rouge">modprobe</code> の設定が必要です。</p>
  </li>
</ul>

<h4 id="arch-linux">Arch Linux</h4>

<ul>
  <li><code class="highlighter-rouge">/etc/sysctl.conf</code>（または <code class="highlighter-rouge">/etc/sysctl.d</code>）に <code class="highlighter-rouge">kernel.unprivileged_userns_clone=1</code> を追加して、<code class="highlighter-rouge">sudo sysctl --system</code> を実行してください。</li>
</ul>

<h4 id="opensuse">openSUSE</h4>

<ul>
  <li>
    <p><code class="highlighter-rouge">sudo modprobe ip_tables iptable_mangle iptable_nat iptable_filter</code> を実行することが必要です。
設定方法によっては他のディストリビューションにおいても必要なことかもしれません。</p>
  </li>
  <li>
    <p>openSUSE 15 において動作します。</p>
  </li>
</ul>

<h4 id="fedora-31-and-later">Fedora 31 およびそれ以降</h4>

<ul>
  <li>Fedora 31 はデフォルトで cgroup v2 を利用しています。
これは今のところ、コンテナー起動においてサポートされていません。
<code class="highlighter-rouge">sudo grubby --update-kernel=ALL --args="systemd.unified_cgroup_hierarchy=0"</code> を実行して cgroup v1 を利用するようにしてください。</li>
  <li><code class="highlighter-rouge">sudo dnf install -y iptables</code> が必要かもしれません。</li>
</ul>

<h4 id="centos-8">CentOS 8</h4>

<ul>
  <li><code class="highlighter-rouge">sudo dnf install -y iptables</code> が必要かもしれません。</li>
</ul>

<h4 id="centos-7">CentOS 7</h4>

<ul>
  <li>
    <p><code class="highlighter-rouge">/etc/sysctl.conf</code>（または <code class="highlighter-rouge">/etc/sysctl.d</code>）に <code class="highlighter-rouge">user.max_user_namespaces=28633</code> を追加して、<code class="highlighter-rouge">sudo sysctl --system</code> を実行してください。</p>
  </li>
  <li>
    <p>デフォルトでは <code class="highlighter-rouge">systemctl --user</code> は動作しません。
デーモンは sysmted を使わずに直接起動してください。
<code class="highlighter-rouge">dockerd-rootless.sh --experimental --storage-driver vfs</code> などです。</p>
  </li>
  <li>
    <p>CentOS 7.7 において動作します。
これより古いリリースにおいては、追加の設定手順が必要になります。</p>
  </li>
  <li>
    <p>CentOS 7.6 やこれ以前のリリースにおいては、<a href="https://copr.fedorainfracloud.org/coprs/vbatts/shadow-utils-newxidmap/">COPR パッケージの <code class="highlighter-rouge">vbatts/shadow-utils-newxidmap</code></a> をインストールしていることが必要です。</p>
  </li>
  <li>
    <p>CentOS 7.5 やこれ以前のリリースにおいては <code class="highlighter-rouge">sudo grubby --update-kernel=ALL --args="user_namespace.enable=1"</code> の実行と、その後にシステムを再起動することが必要です。</p>
  </li>
</ul>

<h2 id="known-limitations">既知の制約</h2>

<ul>
  <li><code class="highlighter-rouge">vfs</code> グラフドライバーだけがサポートされます。
ただし Ubuntu と Debian 10 の場合は <code class="highlighter-rouge">overlay2</code> と <code class="highlighter-rouge">overlay</code> もサポートされます。</li>
  <li>以下の機能はサポートされません。
    <ul>
      <li>cgroups （cgroups に依存している <code class="highlighter-rouge">docker top</code>も同様。）</li>
      <li>AppArmor</li>
      <li>Checkpoint</li>
      <li>Overlay ネットワーク</li>
      <li>SCTP ポートの公開</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">ping</code> コマンドを利用するには <a href="#routing-ping-packets">Routing ping packets</a> を参照してください。</li>
  <li>To expose privileged TCP/UDP ports (&lt; 1024), see <a href="#exposing-privileged-ports">Exposing privileged ports</a>.</li>
  <li><code class="highlighter-rouge">IPAddress</code> shown in <code class="highlighter-rouge">docker inspect</code> and is namespaced inside RootlessKit’s network namespace.
This means the IP address is not reachable from the host without <code class="highlighter-rouge">nsenter</code>-ing into the network namespace.</li>
  <li>Host network (<code class="highlighter-rouge">docker run --net=host</code>) is also namespaced inside RootlessKit.</li>
</ul>

<h2 id="install">インストール</h2>

<p><a href="https://get.docker.com/rootless" target="_blank" class="_">https://get.docker.com/rootless</a> から、インストールスクリプトを入手することができます。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> curl <span class="nt">-fsSL</span> https://get.docker.com/rootless | sh
</code></pre></div></div>

<p>Make sure to run the script as a non-root user.
To install Rootless Docker as the root user, see the <a href="#manual-installation">Manual installation</a> steps.</p>

<p>The script shows environment variables that are required:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> curl <span class="nt">-fsSL</span> https://get.docker.com/rootless | sh
<span class="c">...
</span><span class="gp">#</span> Docker binaries are installed <span class="k">in</span> /home/testuser/bin
<span class="gp">#</span> WARN: dockerd is not <span class="k">in </span>your current PATH or pointing to /home/testuser/bin/dockerd
<span class="gp">#</span> Make sure the following environment variables are <span class="nb">set</span> <span class="o">(</span>or add them to ~/.bashrc<span class="o">)</span>:
<span class="go">
</span><span class="gp">export PATH=/home/testuser/bin:$</span>PATH
<span class="gp">export PATH=$</span>PATH:/sbin
<span class="go">export DOCKER_HOST=unix:///run/user/1001/docker.sock

</span><span class="gp">#</span>
<span class="gp">#</span> To control docker service run:
<span class="gp">#</span> systemctl <span class="nt">--user</span> <span class="o">(</span>start|stop|restart<span class="o">)</span> docker
<span class="gp">#</span>
</code></pre></div></div>

<h3 id="manual-installation">手動インストール</h3>

<p>To install the binaries manually without using the installer, extract
<code class="highlighter-rouge">docker-rootless-extras-&lt;version&gt;.tar.gz</code> along with <code class="highlighter-rouge">docker-&lt;version&gt;.tar.gz</code>
from <a href="https://download.docker.com/linux/static/stable/x86_64/" target="_blank" class="_">https://download.docker.com/linux/static/stable/x86_64/</a></p>

<p>If you already have the Docker daemon running as the root, you only need to
extract <code class="highlighter-rouge">docker-rootless-extras-&lt;version&gt;.tar.gz</code>. The archive can be extracted
under an arbitrary directory listed in the <code class="highlighter-rouge">$PATH</code>. For example, <code class="highlighter-rouge">/usr/local/bin</code>,
or <code class="highlighter-rouge">$HOME/bin</code>.</p>

<h3 id="nightly-channel">Nightly channel</h3>

<p>To install a nightly version of the Rootless Docker, run the installation script
using <code class="highlighter-rouge">CHANNEL="nightly"</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> curl <span class="nt">-fsSL</span> https://get.docker.com/rootless | <span class="nv">CHANNEL</span><span class="o">=</span><span class="s2">"nightly"</span> sh
</code></pre></div></div>

<p>The raw binary archives are available at:</p>
<ul>
  <li>https://oligarch.dockerproject.org/linux/x86_64/docker-rootless-extras.tgz</li>
  <li>https://oligarch.dockerproject.org/linux/x86_64/docker.tgz</li>
</ul>

<h2 id="usage">利用方法</h2>

<h3 id="daemon">デーモン</h3>

<p>Use <code class="highlighter-rouge">systemctl --user</code> to manage the lifecycle of the daemon:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> systemctl <span class="nt">--user</span> start docker
</code></pre></div></div>

<p>To launch the daemon on system startup, enable the systemd service and lingering:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> systemctl <span class="nt">--user</span> <span class="nb">enable </span>docker
<span class="gp">$</span> <span class="nb">sudo </span>loginctl enable-linger <span class="k">$(</span>whoami<span class="k">)</span>
</code></pre></div></div>

<p>To run the daemon directly without systemd, you need to run
<code class="highlighter-rouge">dockerd-rootless.sh</code> instead of <code class="highlighter-rouge">dockerd</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> dockerd-rootless.sh <span class="nt">--experimental</span> <span class="nt">--storage-driver</span> vfs
</code></pre></div></div>

<p>As Rootless mode is experimental, you need to run
<code class="highlighter-rouge">dockerd-rootless.sh</code> with <code class="highlighter-rouge">--experimental</code>.</p>

<p>You also need <code class="highlighter-rouge">--storage-driver vfs</code> unless you are using Ubuntu or Debian 10
kernel. You don’t need to care about these flags if you manage the daemon using
systemd, as these flags are automatically added to the systemd unit file.</p>

<p>Remarks about directory paths:</p>

<ul>
  <li>The socket path is set to <code class="highlighter-rouge">$XDG_RUNTIME_DIR/docker.sock</code> by default.
<code class="highlighter-rouge">$XDG_RUNTIME_DIR</code> is typically set to <code class="highlighter-rouge">/run/user/$UID</code>.</li>
  <li>The data dir is set to <code class="highlighter-rouge">~/.local/share/docker</code> by default.</li>
  <li>The exec dir is set to <code class="highlighter-rouge">$XDG_RUNTIME_DIR/docker</code> by default.</li>
  <li>The daemon config dir is set to <code class="highlighter-rouge">~/.config/docker</code> (not <code class="highlighter-rouge">~/.docker</code>, which is
used by the client) by default.</li>
</ul>

<p>Other remarks:</p>

<ul>
  <li>The <code class="highlighter-rouge">dockerd-rootless.sh</code> script executes <code class="highlighter-rouge">dockerd</code> in its own user, mount,
and network namespaces. You can enter the namespaces by running
<code class="highlighter-rouge">nsenter -U --preserve-credentials -n -m -t $(cat $XDG_RUNTIME_DIR/docker.pid)</code>.</li>
  <li><code class="highlighter-rouge">docker info</code> shows <code class="highlighter-rouge">rootless</code> in <code class="highlighter-rouge">SecurityOptions</code></li>
  <li><code class="highlighter-rouge">docker info</code> shows <code class="highlighter-rouge">none</code> as <code class="highlighter-rouge">Cgroup Driver</code></li>
</ul>

<h3 id="client">Client</h3>

<p>You need to specify the socket path explicitly.</p>

<p>To specify the socket path using <code class="highlighter-rouge">$DOCKER_HOST</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">export </span><span class="nv">DOCKER_HOST</span><span class="o">=</span>unix://<span class="nv">$XDG_RUNTIME_DIR</span>/docker.sock
<span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">-p</span> 8080:80 nginx
</code></pre></div></div>

<p>To specify the socket path using <code class="highlighter-rouge">docker context</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker context create rootless <span class="nt">--description</span> <span class="s2">"for rootless mode"</span> <span class="nt">--docker</span> <span class="s2">"host=unix://</span><span class="nv">$XDG_RUNTIME_DIR</span><span class="s2">/docker.sock"</span>
<span class="go">rootless
Successfully created context "rootless"
</span><span class="gp">$</span> docker context use rootless
<span class="go">rootless
Current context is now "rootless"
</span><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">-p</span> 8080:80 nginx
</code></pre></div></div>

<h2 id="best-practices">Best practices</h2>

<h3 id="rootless-docker-in-docker">Rootless Docker in Docker</h3>

<p>To run Rootless Docker inside “rootful” Docker, use the <code class="highlighter-rouge">docker:&lt;version&gt;-dind-rootless</code>
image instead of <code class="highlighter-rouge">docker:&lt;version&gt;-dind</code>.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--name</span> dind-rootless <span class="nt">--privileged</span> docker:19.03-dind-rootless <span class="nt">--experimental</span>
</code></pre></div></div>

<p>The <code class="highlighter-rouge">docker:&lt;version&gt;-dind-rootless</code> image runs as a non-root user (UID 1000).
However, <code class="highlighter-rouge">--privileged</code> is required for disabling seccomp, AppArmor, and mount
masks.</p>

<h3 id="expose-docker-api-socket-through-tcp">Expose Docker API socket through TCP</h3>

<p>To expose the Docker API socket through TCP, you need to launch <code class="highlighter-rouge">dockerd-rootless.sh</code>
with <code class="highlighter-rouge">DOCKERD_ROOTLESS_ROOTLESSKIT_FLAGS="-p 0.0.0.0:2376:2376/tcp"</code>.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nv">DOCKERD_ROOTLESS_ROOTLESSKIT_FLAGS</span><span class="o">=</span><span class="s2">"-p 0.0.0.0:2376:2376/tcp"</span> <span class="se">\</span>
  dockerd-rootless.sh <span class="nt">--experimental</span> <span class="se">\</span>
  <span class="nt">-H</span> tcp://0.0.0.0:2376 <span class="se">\</span>
  <span class="nt">--tlsverify</span> <span class="nt">--tlscacert</span><span class="o">=</span>ca.pem <span class="nt">--tlscert</span><span class="o">=</span>cert.pem <span class="nt">--tlskey</span><span class="o">=</span>key.pem
</code></pre></div></div>

<h3 id="expose-docker-api-socket-through-ssh">Expose Docker API socket through SSH</h3>

<p>To expose the Docker API socket through SSH, you need to make sure <code class="highlighter-rouge">$DOCKER_HOST</code>
is set on the remote host.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> ssh <span class="nt">-l</span> &lt;REMOTEUSER&gt; &lt;REMOTEHOST&gt; <span class="s1">'echo $DOCKER_HOST'</span>
<span class="go">unix:///run/user/1001/docker.sock
</span><span class="gp">$</span> docker <span class="nt">-H</span> ssh://&lt;REMOTEUSER&gt;@&lt;REMOTEHOST&gt; run ...
</code></pre></div></div>

<h3 id="routing-ping-packets">Routing ping packets</h3>

<p>On some distributions, <code class="highlighter-rouge">ping</code> does not work by default.</p>

<p>Add <code class="highlighter-rouge">net.ipv4.ping_group_range = 0   2147483647</code> to <code class="highlighter-rouge">/etc/sysctl.conf</code> (or
<code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code> to allow using <code class="highlighter-rouge">ping</code>.</p>

<h3 id="exposing-privileged-ports">Exposing privileged ports</h3>

<p>To expose privileged ports (&lt; 1024), set <code class="highlighter-rouge">CAP_NET_BIND_SERVICE</code> on <code class="highlighter-rouge">rootlesskit</code> binary.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">sudo </span>setcap <span class="nv">cap_net_bind_service</span><span class="o">=</span>ep <span class="nv">$HOME</span>/bin/rootlesskit
</code></pre></div></div>

<p>Or add <code class="highlighter-rouge">net.ipv4.ip_unprivileged_port_start=0</code> to <code class="highlighter-rouge">/etc/sysctl.conf</code> (or
<code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code>.</p>

<h3 id="limiting-resources">Limiting resources</h3>

<p>In Docker 19.03, rootless mode ignores cgroup-related <code class="highlighter-rouge">docker run</code> flags such as
<code class="highlighter-rouge">--cpus</code>, <code class="highlighter-rouge">--memory</code>, --pids-limit`.</p>

<p>However, you can still use the traditional <code class="highlighter-rouge">ulimit</code> and <a href="https://github.com/opsengine/cpulimit"><code class="highlighter-rouge">cpulimit</code></a>,
though they work in process-granularity rather than in container-granularity,
and can be arbitrarily disabled by the container process.</p>

<p>For example:</p>

<ul>
  <li>To limit CPU usage to 0.5 cores (similar to <code class="highlighter-rouge">docker run --cpus 0.5</code>):
<code class="highlighter-rouge">docker run &lt;IMAGE&gt; cpulimit --limit=50 --include-children &lt;COMMAND&gt;</code></li>
  <li>
    <p>To limit max VSZ to 64MiB (similar to <code class="highlighter-rouge">docker run --memory 64m</code>):
<code class="highlighter-rouge">docker run &lt;IMAGE&gt; sh -c "ulimit -v 65536; &lt;COMMAND&gt;"</code></p>
  </li>
  <li>To limit max number of processes to 100 per namespaced UID 2000
(similar to <code class="highlighter-rouge">docker run --pids-limit=100</code>):
<code class="highlighter-rouge">docker run --user 2000 --ulimit nproc=100 &lt;IMAGE&gt; &lt;COMMAND&gt;</code></li>
</ul>

<h3 id="changing-the-network-stack">Changing the network stack</h3>

<p><code class="highlighter-rouge">dockerd-rootless.sh</code> uses <a href="https://github.com/rootless-containers/slirp4netns">slirp4netns</a>
(if installed) or <a href="https://github.com/moby/vpnkit">VPNKit</a> as the network stack
by default.</p>

<p>These network stacks run in userspace and might have performance overhead.
See <a href="https://github.com/rootless-containers/rootlesskit/tree/v0.9.5#network-drivers">RootlessKit documentation</a> for further information.</p>

<p>Optionally, you can use <code class="highlighter-rouge">lxc-user-nic</code> instead for the best performance.
To use <code class="highlighter-rouge">lxc-user-nic</code>, you need to edit <a href="https://github.com/rootless-containers/rootlesskit/tree/v0.9.5#--netlxc-user-nic-experimental"><code class="highlighter-rouge">/etc/lxc/lxc-usernet</code></a>
and set <code class="highlighter-rouge">$DOCKERD_ROOTLESS_ROOTLESSKIT_NET=lxc-user-nic</code>.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="errors-when-starting-the-docker-daemon">Errors when starting the Docker daemon</h3>

<p><strong>[rootlesskit:parent] error: failed to start the child: fork/exec /proc/self/exe: operation not permitted</strong></p>

<p>This error occurs mostly when the value of <code class="highlighter-rouge">/proc/sys/kernel/unprivileged_userns_clone </code> is set to 0:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">cat</span> /proc/sys/kernel/unprivileged_userns_clone
<span class="go">0
</span></code></pre></div></div>

<p>To fix this issue, add  <code class="highlighter-rouge">kernel.unprivileged_userns_clone=1</code> to
<code class="highlighter-rouge">/etc/sysctl.conf</code> (or <code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code>.</p>

<p><strong>[rootlesskit:parent] error: failed to start the child: fork/exec /proc/self/exe: no space left on device</strong></p>

<p>This error occurs mostly when the value of <code class="highlighter-rouge">/proc/sys/user/max_user_namespaces</code> is too small:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">cat</span> /proc/sys/user/max_user_namespaces
<span class="go">0
</span></code></pre></div></div>

<p>To fix this issue, add  <code class="highlighter-rouge">user.max_user_namespaces=28633</code> to
<code class="highlighter-rouge">/etc/sysctl.conf</code> (or <code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code>.</p>

<p><strong>[rootlesskit:parent] error: failed to setup UID/GID map: failed to compute uid/gid map: No subuid ranges found for user 1001 (“testuser”)</strong></p>

<p>This error occurs when <code class="highlighter-rouge">/etc/subuid</code> and <code class="highlighter-rouge">/etc/subgid</code> are not configured. See <a href="#prerequisites">Prerequisites</a>.</p>

<p><strong>could not get XDG_RUNTIME_DIR</strong></p>

<p>This error occurs when <code class="highlighter-rouge">$XDG_RUNTIME_DIR</code> is not set.</p>

<p>On a non-systemd host, you need to create a directory and then set the path:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">export </span><span class="nv">XDG_RUNTIME_DIR</span><span class="o">=</span><span class="nv">$HOME</span>/.docker/xrd
<span class="gp">$</span> rm <span class="nt">-rf</span> <span class="nv">$XDG_RUNTIME_DIR</span>
<span class="gp">$</span> mkdir <span class="nt">-p</span> <span class="nv">$XDG_RUNTIME_DIR</span>
<span class="gp">$</span> dockerd-rootless.sh <span class="nt">--experimental</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>:
You must remove the directory every time you log out.</p>
</blockquote>

<p>On a systemd host, log into the host using <code class="highlighter-rouge">pam_systemd</code> (see below).
The value is automatically set to <code class="highlighter-rouge">/run/user/$UID</code> and cleaned up on every logout.</p>

<p><strong><code class="highlighter-rouge">systemctl --user</code> fails with “Failed to connect to bus: No such file or directory”</strong></p>

<p>This error occurs mostly when you switch from the root user to an non-root user with <code class="highlighter-rouge">sudo</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span> <span class="nb">sudo</span> <span class="nt">-iu</span> testuser
<span class="gp">$</span> systemctl <span class="nt">--user</span> start docker
<span class="go">Failed to connect to bus: No such file or directory
</span></code></pre></div></div>

<p>Instead of <code class="highlighter-rouge">sudo -iu &lt;USERNAME&gt;</code>, you need to log in using <code class="highlighter-rouge">pam_systemd</code>. For example:</p>

<ul>
  <li>Log in through the graphic console</li>
  <li><code class="highlighter-rouge">ssh &lt;USERNAME&gt;@localhost</code></li>
  <li><code class="highlighter-rouge">machinectl shell &lt;USERNAME&gt;@</code></li>
</ul>

<p><strong>The daemon does not start up automatically</strong></p>

<p>You need <code class="highlighter-rouge">sudo loginctl enable-linger $(whoami)</code> to enable the daemon to start
up automatically. See <a href="#usage">Usage</a>.</p>

<p><strong><code class="highlighter-rouge">dockerd</code> fails with “rootless mode is supported only when running in experimental mode”</strong></p>

<p>This error occurs when the daemon is launched without the <code class="highlighter-rouge">--experimental</code> flag.
See <a href="#usage">Usage</a>.</p>

<h3 id="docker-pull-errors"><code class="highlighter-rouge">docker pull</code> errors</h3>

<p><strong>docker: failed to register layer: Error processing tar file(exit status 1): lchown &lt;FILE&gt;: invalid argument</strong></p>

<p>This error occurs when the number of available entries in <code class="highlighter-rouge">/etc/subuid</code> or
<code class="highlighter-rouge">/etc/subgid</code> is not sufficient. The number of entries required vary across
images. However, 65,536 entries are sufficient for most images. See
<a href="#prerequisites">Prerequisites</a>.</p>

<h3 id="docker-run-errors"><code class="highlighter-rouge">docker run</code> errors</h3>

<p><strong><code class="highlighter-rouge">--cpus</code>, <code class="highlighter-rouge">--memory</code>, and <code class="highlighter-rouge">--pids-limit</code> are ignored</strong></p>

<p>This is an expected behavior in Docker 19.03. For more information, see <a href="#limiting-resources">Limiting resources</a>.</p>

<p><strong>Error response from daemon: cgroups: cgroup mountpoint does not exist: unknown.</strong></p>

<p>This error occurs mostly when the host is running in cgroup v2. See the section
<a href="#fedora-31-or-later">Fedora 31 or later</a> for information on switching the host
to use cgroup v1.</p>

<h3 id="networking-errors">Networking errors</h3>

<p><strong><code class="highlighter-rouge">docker run -p</code> fails with <code class="highlighter-rouge">cannot expose privileged port</code></strong></p>

<p><code class="highlighter-rouge">docker run -p</code> fails with this error when a privileged port (&lt; 1024) is specified as the host port.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-p</span> 80:80 nginx:alpine
<span class="gp">docker: Error response from daemon: driver failed programming external connectivity on endpoint focused_swanson (9e2e139a9d8fc92b37c36edfa6214a6e986fa2028c0cc359812f685173fa6df7): Error starting userland proxy: error while calling PortManager.AddPort(): cannot expose privileged port 80, you might need to add "net.ipv4.ip_unprivileged_port_start=0" (currently 1024) to /etc/sysctl.conf, or set CAP_NET_BIND_SERVICE on rootlesskit binary, or choose a larger port number (&gt;</span><span class="o">=</span> 1024<span class="o">)</span>: listen tcp 0.0.0.0:80: <span class="nb">bind</span>: permission denied.
</code></pre></div></div>

<p>When you experience this error, consider using an unprivileged port instead. For example, 8080 instead of 80.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-p</span> 8080:80 nginx:alpine
</code></pre></div></div>

<p>To allow exposing privileged ports, see <a href="#exposing-privileged-ports">Exposing privileged ports</a>.</p>

<p><strong>ping doesn’t work</strong></p>

<p>Ping does not work when <code class="highlighter-rouge">/proc/sys/net/ipv4/ping_group_range</code> is set to <code class="highlighter-rouge">1 0</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">cat</span> /proc/sys/net/ipv4/ping_group_range
<span class="go">1       0
</span></code></pre></div></div>

<p>For details, see <a href="#routing-ping-packets">Routing ping packets</a>.</p>

<p><strong><code class="highlighter-rouge">IPAddress</code> shown in <code class="highlighter-rouge">docker inspect</code> is unreachable</strong></p>

<p>This is an expected behavior, as the daemon is namespaced inside RootlessKit’s
network namespace. Use <code class="highlighter-rouge">docker run -p</code> instead.</p>

<p><strong><code class="highlighter-rouge">--net=host</code> doesn’t listen ports on the host network namespace</strong></p>

<p>This is an expected behavior, as the daemon is namespaced inside RootlessKit’s
network namespace. Use <code class="highlighter-rouge">docker run -p</code> instead.</p>

                            <!-- tags -->
                            
                            <span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span
                                style="vertical-align: 2px"><a
                                    href="https://docs.docker.com/search/?q=security">security</a>, <a
                                    href="https://docs.docker.com/search/?q=namespaces">namespaces</a>, <a
                                    href="https://docs.docker.com/search/?q=rootless">rootless</a></span>
                            
                            
                            <div id="ratings-div"
                                style="color:#b9c2cc; text-align: center; margin-top: 150px;">
                                <div id="pd_rating_holder_8453675"></div>
                                <script type="text/javascript">
                                    PDRTJS_settings_8453675 = {
                                        "id": "8453675",
                                        "unique_id": "engine/security/rootless.md",
                                        "title": "root ユーザー以外による Docker デーモン起動（rootless モード）",
                                        "permalink": "https://github.com/docker/docker.github.io/blob/oligarch/engine/security/rootless.md"
                                    };
                                    (function (d, c, j) {
                                        if (!document.getElementById(j)) {
                                            var pd = d.createElement(c),
                                                s;
                                            pd.id = j;
                                            pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
                                            s = document.getElementsByTagName(c)[0];
                                            s.parentNode.insertBefore(pd, s);
                                        }
                                    }(document, 'script', 'pd-rating-js'));
                                </script>
                            </div>
                            
                        </section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
    <ul class="nav jsTOCHorizontal hidden-md hidden-lg">
    </ul>
    <div class="divider hidden-md hidden-lg"></div>
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul>
                                        
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/engine/security/rootless.md"><i
                                                    class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/issues/new?body=ファイル: [engine/security/rootless.md](https://matsuand.github.io/docs.docker.jp.onthefly/engine/security/rootless/)"
                                                class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
                                        <!-- toggle mode -->
                                        <li>
                                            <div class="toggle-mode">
                                                <div class="icon">
                                                    <i class="fa fa-sun-o" aria-hidden="true"></i>
                                                </div>
                                                <div class="toggle-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" id="switch-style">
                                                        <div class="slider round"></div>
                                                    </label>
                                                </div>
                                                <div class="icon">
                                                    <i class="fa fa-moon-o" aria-hidden="true"></i>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                
                                
                                
                                
                                <div id="side-toc-title">本ページ内:</div>
                                
<ul id="my_toc" class="inline_toc">
  <li><a href="#how-it-works" class="nomunge">どのように動作するか</a></li>
  <li><a href="#prerequisites" class="nomunge">前提条件</a>
    <ul>
      <li><a href="#distribution-specific-hint" class="nomunge">ディストリビューション固有の情報</a></li>
    </ul>
  </li>
  <li><a href="#known-limitations" class="nomunge">既知の制約</a></li>
  <li><a href="#install" class="nomunge">インストール</a>
    <ul>
      <li><a href="#manual-installation" class="nomunge">手動インストール</a></li>
      <li><a href="#nightly-channel" class="nomunge">Nightly channel</a></li>
    </ul>
  </li>
  <li><a href="#usage" class="nomunge">利用方法</a>
    <ul>
      <li><a href="#daemon" class="nomunge">デーモン</a></li>
      <li><a href="#client" class="nomunge">Client</a></li>
    </ul>
  </li>
  <li><a href="#best-practices" class="nomunge">Best practices</a>
    <ul>
      <li><a href="#rootless-docker-in-docker" class="nomunge">Rootless Docker in Docker</a></li>
      <li><a href="#expose-docker-api-socket-through-tcp" class="nomunge">Expose Docker API socket through TCP</a></li>
      <li><a href="#expose-docker-api-socket-through-ssh" class="nomunge">Expose Docker API socket through SSH</a></li>
      <li><a href="#routing-ping-packets" class="nomunge">Routing ping packets</a></li>
      <li><a href="#exposing-privileged-ports" class="nomunge">Exposing privileged ports</a></li>
      <li><a href="#limiting-resources" class="nomunge">Limiting resources</a></li>
      <li><a href="#changing-the-network-stack" class="nomunge">Changing the network stack</a></li>
    </ul>
  </li>
  <li><a href="#troubleshooting" class="nomunge">Troubleshooting</a>
    <ul>
      <li><a href="#errors-when-starting-the-docker-daemon" class="nomunge">Errors when starting the Docker daemon</a></li>
      <li><a href="#docker-pull-errors" class="nomunge">docker pull errors</a></li>
      <li><a href="#docker-run-errors" class="nomunge">docker run errors</a></li>
      <li><a href="#networking-errors" class="nomunge">Networking errors</a></li>
    </ul>
  </li>
</ul>


                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker?</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container?</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Play with Docker</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2020 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
    
    <script>var pageURL = "/engine/security/rootless/";</script>
    <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
    <script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
    <script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
    <script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
    <script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
    <script defer src="/js/search.js"></script>
</body>


</html>
