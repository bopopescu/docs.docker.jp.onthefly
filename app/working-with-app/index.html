<!-- Page generated 2020-07-16 21:49:37 +0900 -->
<!-- Logic for 'edit this button'


    

    

    

    

    

    

    

    

-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style type="text/css">
      @charset "UTF-8";
      [ng\:cloak],
      [ng-cloak],
      [data-ng-cloak],
      [x-ng-cloak],
      .ng-cloak,
      .x-ng-cloak,
      .ng-hide:not(.ng-hide-animate) {
          display: none !important;
      }

      ng\:form {
          display: block;
      }
  </style>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>

  
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <!-- metadata -->
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2020-07-16T21:49:37+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:title" itemprop="title name" content="Docker App"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="これは試験的な（experimental）機能です。 試験的な機能は、将来の製品に搭載される機能をいち早く試すことができるものです。 ただし現段階でのこの機能は、テストとフィードバックのためだけを意図しています。 したがってリリース時には予告なく変更される場合があり、将来のリリースでは完全に削除されることもあります。 試験的な機能は本番環境では利用しないでください。 Docker ではこの試験的機能に対するサポートは行っていません。 Docker CLI において試験的機能を有効にするには、config.json ファイルを編集して experimental を有効に設定してください。 Docker Desktop メニューから試験的機能を有効にするには、Settings (macOS の場合は Preferences) &gt; Command Line をクリックし、Enable experimental features チェックを有効にします。 そして Apply &amp; Restart..." />
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker ドキュメント"/>
  <meta property="article:published_time" itemprop="datePublished" content="2020-07-16T21:49:37+09:00"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="Docker App, applications, compose, orchestration">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
  <link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

  <!-- Go get "Open Sans" font from Google -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <!-- SEO stuff -->
  <title>Docker App | Docker ドキュメント</title>
  <meta property="og:title" content="Docker App" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="description" content="Docker App について" />
  <meta property="og:description" content="Docker App について" />
  <link rel="canonical" href="/app/working-with-app/" />
  <meta property="og:url" content="https://docs.docker.com/app/working-with-app/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Docker App","description":"Docker App について","url":"https://docs.docker.com/app/working-with-app/"}</script>
  <!-- END SEO STUFF -->
  
</head>


    <body ng-app="Docker" ng-controller="DockerController" class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs">
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs">
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div id="tabs">
        <ul class="tabs jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>

        </div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section">
                            
                            
                            <h1>Docker App</h1> 
                            <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    13 分
  
</span>

                            
                            
<blockquote class="important">
  <p>これは試験的な（experimental）機能です。</p>

  <!-- This text will be included in the CLI plugin docs that are marked as experimental in Docker Enterprise 3.0 release -->
  <p>試験的な機能は、将来の製品に搭載される機能をいち早く試すことができるものです。
ただし現段階でのこの機能は、テストとフィードバックのためだけを意図しています。
したがってリリース時には予告なく変更される場合があり、将来のリリースでは完全に削除されることもあります。
試験的な機能は本番環境では利用しないでください。
Docker ではこの試験的機能に対するサポートは行っていません。</p>

  <p>Docker CLI において試験的機能を有効にするには、<code class="highlighter-rouge">config.json</code> ファイルを編集して <code class="highlighter-rouge">experimental</code> を有効に設定してください。</p>

  <p>Docker Desktop メニューから試験的機能を有効にするには、<strong>Settings</strong> (macOS の場合は <strong>Preferences</strong>) &gt; <strong>Command Line</strong> をクリックし、<strong>Enable experimental features</strong> チェックを有効にします。
そして <strong>Apply &amp; Restart</strong> をクリックしてください。</p>
</blockquote>

<p>Docker CLI における現時点での試験的機能については <a href="https://github.com/docker/cli/blob/oligarch/experimental/README.md">Docker CLI 試験的機能</a> の一覧を参照してください。</p>

<h2 id="overview">概要</h2>

<p>Docker App is a CLI plug-in that introduces a top-level <code class="highlighter-rouge">docker app</code> command to bring
the <em>container experience</em> to applications. The following table compares Docker containers with Docker applications.</p>

<table>
  <thead>
    <tr>
      <th>オブジェクト</th>
      <th>設定ファイル</th>
      <th>ビルドコマンド</th>
      <th>実行コマンド</th>
      <th>プッシュコマンド</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>コンテナー</td>
      <td>Dockerfile</td>
      <td>docker image build</td>
      <td>docker container run</td>
      <td>docker image push</td>
    </tr>
    <tr>
      <td>アプリ</td>
      <td>アプリパッケージ</td>
      <td>docker app bundle</td>
      <td>docker app install</td>
      <td>docker app push</td>
    </tr>
  </tbody>
</table>

<p>With Docker App, entire applications can now be managed as easily as images and containers. For example,
Docker App lets you  <em>build</em>, <em>validate</em> and <em>deploy</em> applications with the <code class="highlighter-rouge">docker app</code> command. You can
even leverage secure supply-chain features such as signed <code class="highlighter-rouge">push</code> and <code class="highlighter-rouge">pull</code> operations.</p>

<blockquote>
  <p><strong>NOTE</strong>: <code class="highlighter-rouge">docker app</code> works with <code class="highlighter-rouge">Docker 19.03</code> or higher.</p>
</blockquote>

<p>This guide walks you through two scenarios:</p>

<ol>
  <li>Initialize and deploy a new Docker App project from scratch.</li>
  <li>Convert an existing Compose app into a Docker App project (added later in the beta process).</li>
</ol>

<p>The first scenario describes basic components of a Docker App with tools and workflow.</p>

<h2 id="initialize-and-deploy-a-new-docker-app-project-from-scratch">Initialize and deploy a new Docker App project from scratch</h2>

<p>This section describes the steps for creating a new Docker App project to familiarize you with the workflow and most important commands.</p>

<ol>
  <li>Prerequisites</li>
  <li>Initialize an empty new project</li>
  <li>Populate the project</li>
  <li>Validate the app</li>
  <li>Deploy the app</li>
  <li>Push the app to Docker Hub</li>
  <li>Install the app directly from Docker Hub</li>
</ol>

<h3 id="prerequisites">Prerequisites</h3>

<p>You need at least one Docker node operating in Swarm mode. You also need the latest build of the Docker CLI
with the App CLI plugin included.</p>

<p>Depending on your Linux distribution and your security context, you might need to prepend commands with <code class="highlighter-rouge">sudo</code>.</p>

<h3 id="initialize-a-new-empty-project">Initialize a new empty project</h3>

<p>The <code class="highlighter-rouge">docker app init</code> command is used to initialize a new Docker application project. If you run it on
its own, it initializes a new empty project. If you point it to an existing <code class="highlighter-rouge">docker-compose.yml</code> file,
it initializes a new project based on the Compose file.</p>

<p>Use the following command to initialize a new empty project called “hello-world”.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app init --single-file hello-world
Created "hello-world.dockerapp"
</code></pre></div></div>

<p>The command produces a single file in your current directory called <code class="highlighter-rouge">hello-world.dockerapp</code>.
The format of the file name is   <project-name> appended with `.dockerapp`.</project-name>
</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ls
hello-world.dockerapp
</code></pre></div></div>

<p>If you run <code class="highlighter-rouge">docker app init</code> without the <code class="highlighter-rouge">--single-file</code> flag, you get a new directory containing three YAML files.
The name of the directory is the name of the project with <code class="highlighter-rouge">.dockerapp</code> appended, and the three YAML files are:</p>

<ul>
  <li><code class="highlighter-rouge">docker-compose.yml</code></li>
  <li><code class="highlighter-rouge">metadata.yml</code></li>
  <li><code class="highlighter-rouge">parameters.yml</code></li>
</ul>

<p>However, the <code class="highlighter-rouge">--single-file</code> option merges the three YAML files into a single YAML file with three sections.
Each of these sections relates to one of the three YAML files mentioned previously: <code class="highlighter-rouge">docker-compose.yml</code>,
<code class="highlighter-rouge">metadata.yml</code>, and <code class="highlighter-rouge">parameters.yml</code>. Using the <code class="highlighter-rouge">--single-file</code> option enables you to share your application
using a single configuration file.</p>

<p>Inspect the YAML with the following command.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat hello-world.dockerapp
# Application metadata - equivalent to metadata.yml.
version: 0.1.0
name: hello-world
description:
---
# Application services - equivalent to docker-compose.yml.
version: "3.6"
services: {}
---
# Default application parameters - equivalent to parameters.yml.
</code></pre></div></div>

<p>Your file might be more verbose.</p>

<p>Notice that each of the three sections is separated by a set of three dashes (“---“). Let’s quickly describe each section.</p>

<p>The first section of the file specifies identification metadata such as name, version,
description and maintainers. It accepts key-value pairs. This part of the file can be a separate file called <code class="highlighter-rouge">metadata.yml</code></p>

<p>The second section of the file describes the application. It can be a separate file called <code class="highlighter-rouge">docker-compose.yml</code>.</p>

<p>The final section specifies default values for application parameters. It can be a separate file called <code class="highlighter-rouge">parameters.yml</code></p>

<h3 id="populate-the-project">Populate the project</h3>

<p>This section describes editing the project YAML file so that it runs a simple web app.</p>

<p>Use your preferred editor to edit the <code class="highlighter-rouge">hello-world.dockerapp</code> YAML file and update the application section with
the following information:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "3.6"
services:
  hello:
    image: hashicorp/http-echo
    command: ["-text", "${hello.text}"]
    ports:
      - ${hello.port}:5678
</code></pre></div></div>

<p>Update the <code class="highlighter-rouge">Parameters</code> section to the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hello:
  port: 8080
  text: Hello world!
</code></pre></div></div>

<p>The sections of the YAML file are currently order-based. This means it’s important they remain in the order we’ve explained, with the <em>metadata</em> section being first, the <em>app</em> section being second, and the <em>parameters</em> section being last. This may change to name-based sections in future releases.</p>

<p>Save the changes.</p>

<p>The application is updated to run a single-container application based on the <code class="highlighter-rouge">hashicorp/http-echo</code> web server image.
This image has it execute a single command that displays some text and exposes itself on a network port.</p>

<p>Following best practices, the configuration of the application is decoupled from the application itself using variables.
In this case, the text displayed by the app and the port on which it will be published are controlled by two variables defined in the <code class="highlighter-rouge">Parameters</code> section of the file.</p>

<p>Docker App provides the <code class="highlighter-rouge">inspect</code> subcommand to provide a prettified summary of the application configuration.
It is a quick way to check how to configure the application before deployment, without having to read
the <code class="highlighter-rouge">Compose file</code>. It’s important to note that the application is not running at this point, and that
the <code class="highlighter-rouge">inspect</code> operation inspects the configuration file(s).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app inspect hello-world.dockerapp
hello-world 0.1.0

Service (1) Replicas Ports Image
----------- -------- ----- -----
hello       1        8080  hashicorp/http-echo

Parameters (2) Value
-------------- -----
hello.port     8080
hello.text     Hello world!
</code></pre></div></div>

<p><code class="highlighter-rouge">docker app inspect</code> operations fail if the <code class="highlighter-rouge">Parameters</code> section doesn’t specify a default value for
every parameter expressed in the app section.</p>

<p>The application is ready to be validated and rendered.</p>

<h3 id="validate-the-app">Validate the app</h3>

<p>Docker App provides the <code class="highlighter-rouge">validate</code> subcommand to check syntax and other aspects of the configuration.
If the app passes validation, the command returns no arguments.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app validate hello-world.dockerapp
Validated "hello-world.dockerapp"
</code></pre></div></div>

<p><code class="highlighter-rouge">docker app validate</code> operations fail if the <code class="highlighter-rouge">Parameters</code> section doesn’t specify a default value for
every parameter expressed in the app section.</p>

<p>As the <code class="highlighter-rouge">validate</code> operation has returned no problems, the app is ready to be deployed.</p>

<h3 id="deploy-the-app">Deploy the app</h3>

<p>There are several options for deploying a Docker App project.</p>

<ul>
  <li>Deploy as a native Docker App application</li>
  <li>Deploy as a Compose app application</li>
  <li>Deploy as a Docker Stack application</li>
</ul>

<p>All three options are discussed, starting with deploying as a native Docker App application.</p>

<h4 id="deploy-as-a-native-docker-app">Deploy as a native Docker App</h4>

<p>The process for deploying as a native Docker app is as follows:</p>

<p>Use <code class="highlighter-rouge">docker app install</code> to deploy the application.</p>

<p>Use the following command to deploy (install) the application.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app install hello-world.dockerapp --name my-app
Creating network my-app_default
Creating service my-app_hello
Application "my-app" installed on context "default"
</code></pre></div></div>

<p>By default, <code class="highlighter-rouge">docker app</code> uses the <a href="/docs.docker.jp.onthefly/engine/context/working-with-contexts">current context</a> to run the
installation container and as a target context to deploy the application. You can override the second context
using the flag <code class="highlighter-rouge">--target-context</code> or by using the environment variable <code class="highlighter-rouge">DOCKER_TARGET_CONTEXT</code>. This flag is also
available for the commands <code class="highlighter-rouge">status</code>, <code class="highlighter-rouge">upgrade</code>, and <code class="highlighter-rouge">uninstall</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app install hello-world.dockerapp --name my-app --target-context=my-big-production-cluster
Creating network my-app_default
Creating service my-app_hello
Application "my-app" installed on context "my-big-production-cluster"
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: Two applications deployed on the same target context cannot share the same name, but this is
valid if they are deployed on different target contexts.</p>
</blockquote>

<p>You can check the status of the app with the <code class="highlighter-rouge">docker app status &lt;app-name&gt;</code> command.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app status my-app
INSTALLATION
------------
Name:         my-app
Created:      35 seconds
Modified:     31 seconds
Revision:     01DCMY7MWW67AY03B029QATXFF
Last Action:  install
Result:       SUCCESS
Orchestrator: swarm

APPLICATION
-----------
Name:      hello-world
Version:   0.1.0
Reference:

PARAMETERS
----------
hello.port: 8080
hello.text: Hello, World!

STATUS
------
ID              NAME            MODE          REPLICAS    IMAGE             PORTS
miqdk1v7j3zk    my-app_hello    replicated    1/1         hashicorp/http-echo:latest   *:8080-&gt;5678/tcp
</code></pre></div></div>

<p>The app is deployed using the stack orchestrator. This means you can also inspect it using the regular <code class="highlighter-rouge">docker stack</code> commands.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker stack ls
NAME                SERVICES            ORCHESTRATOR
my-app              1                   Swarm
</code></pre></div></div>

<p>Now that the app is running, you can point a web browser at the DNS name or public IP of the Docker node on
port 8080 and see the app. You must ensure traffic to port 8080 is allowed on
the connection from your browser to your Docker host.</p>

<p>Now change the port of the application using <code class="highlighter-rouge">docker app upgrade &lt;app-name&gt;</code> command.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app upgrade my-app --set hello.port=8181
Upgrading service my-app_hello
Application "my-app" upgraded on context "default"
</code></pre></div></div>

<p>You can uninstall the app with <code class="highlighter-rouge">docker app uninstall my-app</code>.</p>

<h4 id="deploy-as-a-docker-compose-app">Deploy as a Docker Compose app</h4>

<p>The process for deploying as a Compose app comprises two major steps:</p>

<ol>
  <li>Render the Docker app project as a <code class="highlighter-rouge">docker-compose.yml</code> file.</li>
  <li>Deploy the app using <code class="highlighter-rouge">docker-compose up</code>.</li>
</ol>

<p>You need a recent version of Docker Compose to complete these steps.</p>

<p>Rendering is the process of reading the entire application configuration and outputting it as a single <code class="highlighter-rouge">docker-compose.yml</code> file. This creates a Compose file with hard-coded values wherever a parameter was specified as a variable.</p>

<p>Use the following command to render the app to a Compose file called <code class="highlighter-rouge">docker-compose.yml</code> in the current directory.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app render --output docker-compose.yml hello-world.dockerapp
</code></pre></div></div>

<p>Check the contents of the resulting <code class="highlighter-rouge">docker-compose.yml</code> file.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat docker-compose.yml
version: "3.6"
services:
  hello:
    command:
    - -text
    - Hello world!
    image: hashicorp/http-echo
    ports:
    - mode: ingress
      target: 5678
      published: 8080
      protocol: tcp
</code></pre></div></div>

<p>Notice that the file contains hard-coded values that were expanded based on the contents of the <code class="highlighter-rouge">Parameters</code>
section of the project’s YAML file. For example, <code class="highlighter-rouge">${hello.text}</code> has been expanded to “Hello world!”.</p>

<blockquote>
  <p><strong>Note</strong>: Almost all the <code class="highlighter-rouge">docker app</code> commands propose the <code class="highlighter-rouge">--set key=value</code> flag to override a default parameter.</p>
</blockquote>

<p>Try to render the application with a different text:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app render hello-world.dockerapp --set hello.text="Hello whales!"
version: "3.6"
services:
  hello:
    command:
    - -text
    - Hello whales!
    image: hashicorp/http-echo
    ports:
    - mode: ingress
      target: 5678
      published: 8080
      protocol: tcp
</code></pre></div></div>

<p>Use <code class="highlighter-rouge">docker-compose up</code> to deploy the app.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker-compose up --detach
WARNING: The Docker Engine you're using is running in swarm mode.
&lt;Snip&gt;
</code></pre></div></div>

<p>The application is now running as a Docker Compose app and should be reachable on port <code class="highlighter-rouge">8080</code> on your Docker host.
You must ensure traffic to port <code class="highlighter-rouge">8080</code> is allowed on the connection form your browser to your Docker host.</p>

<p>You can use <code class="highlighter-rouge">docker-compose down</code> to stop and remove the application.</p>

<h4 id="deploy-as-a-docker-stack">Deploy as a Docker Stack</h4>

<p>Deploying the app as a Docker stack is a two-step process very similar to deploying it as a Docker Compose app.</p>

<ol>
  <li>Render the Docker app project as a <code class="highlighter-rouge">docker-compose.yml</code> file.</li>
  <li>Deploy the app using <code class="highlighter-rouge">docker stack deploy</code>.</li>
</ol>

<p>Complete the steps in the previous section to render the Docker app project as a Compose file and make sure
you’re ready to deploy it as a Docker Stack. Your Docker host must be in Swarm mode.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker stack deploy hello-world-app -c docker-compose.yml
Creating network hello-world-app_default
Creating service hello-world-app_hello
</code></pre></div></div>

<p>The app is now deployed as a Docker stack and can be reached on port <code class="highlighter-rouge">8080</code> on your Docker host.</p>

<p>Use the <code class="highlighter-rouge">docker stack rm hello-world-app</code> command to stop and remove the stack. You must ensure traffic to
port <code class="highlighter-rouge">8080</code> is allowed on the connection form your browser to your Docker host.</p>

<h3 id="push-the-app-to-docker-hub">Push the app to Docker Hub</h3>

<p>As mentioned in the introduction, <code class="highlighter-rouge">docker app</code> lets you manage entire
applications the same way that you currently manage container images. For
example, you can push and pull entire applications from registries like Docker
Hub with <code class="highlighter-rouge">docker app push</code> and <code class="highlighter-rouge">docker app pull</code>. Other <code class="highlighter-rouge">docker app</code> commands,
such as <code class="highlighter-rouge">install</code>, <code class="highlighter-rouge">upgrade</code>, <code class="highlighter-rouge">inspect</code>, and <code class="highlighter-rouge">render</code> can be performed directly
on applications while they are stored in a registry.</p>

<p>Push the application to Docker Hub. To complete this step, you need a valid
Docker ID and you must be logged in to the registry to which you are pushing
the app.</p>

<p>By default, all platform architectures are pushed to the registry. If you are
pushing an official Docker image as part of your app, you may find your app
bundle becomes large with all image architectures embedded. To just push the
architecture required, you can add the <code class="highlighter-rouge">--platform</code> flag.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker login

<span class="nv">$ </span>docker app push my-app <span class="nt">--platform</span><span class="o">=</span><span class="s2">"linux/amd64"</span> <span class="nt">--tag</span> &lt;hub-id&gt;/&lt;repo&gt;:0.1.0
</code></pre></div></div>

<h3 id="install-the-app-directly-from-docker-hub">Install the app directly from Docker Hub</h3>

<p>Now that the app is pushed to the registry, try an <code class="highlighter-rouge">inspect</code> and <code class="highlighter-rouge">install</code> command against it.
The location of your app is different from the one provided in the examples.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app inspect myuser/hello-world:0.1.0
hello-world 0.1.0

Service (1) Replicas Ports Image
----------- -------- ----- -----
hello       1        8080  myuser/hello-world@sha256:ba27d460cd1f22a1a4331bdf74f4fccbc025552357e8a3249c40ae216275de96

Parameters (2) Value
-------------- -----
hello.port     8080
hello.text     Hello world!
</code></pre></div></div>

<p>This action was performed directly against the app in the registry.</p>

<p>Now install it as a native Docker App by referencing the app in the registry, with a different port.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app install myuser/hello-world:0.1.0 --set hello.port=8181
Creating network hello-world_default
Creating service hello-world_hello
Application "hello-world" installed on context "default"
</code></pre></div></div>

<p>Test that the app is working.</p>

<p>The app used in these examples is a simple web server that displays the text “Hello world!” on port 8181,
your app might be different.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl http://localhost:8181
Hello world!
</code></pre></div></div>

<p>Uninstall the app.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker app uninstall hello-world
Removing service hello-world_hello
Removing network hello-world_default
Application "hello-world" uninstalled on context "default"
</code></pre></div></div>

<p>You can see the name of your Docker App with the <code class="highlighter-rouge">docker stack ls</code> command.</p>

                            <!-- tags -->
                            
                            <span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span
                                style="vertical-align: 2px"><a
                                    href="https://docs.docker.com/search/?q=Docker App">Docker App</a>, <a
                                    href="https://docs.docker.com/search/?q=applications">applications</a>, <a
                                    href="https://docs.docker.com/search/?q=compose">compose</a>, <a
                                    href="https://docs.docker.com/search/?q=orchestration">orchestration</a></span>
                            
                            
                            <div id="ratings-div"
                                style="color:#b9c2cc; text-align: center; margin-top: 150px;">
                                <div id="pd_rating_holder_8453675"></div>
                                <script type="text/javascript">
                                    PDRTJS_settings_8453675 = {
                                        "id": "8453675",
                                        "unique_id": "app/working-with-app.md",
                                        "title": "Docker App",
                                        "permalink": "https://github.com/docker/docker.github.io/blob/oligarch/app/working-with-app.md"
                                    };
                                    (function (d, c, j) {
                                        if (!document.getElementById(j)) {
                                            var pd = d.createElement(c),
                                                s;
                                            pd.id = j;
                                            pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
                                            s = document.getElementsByTagName(c)[0];
                                            s.parentNode.insertBefore(pd, s);
                                        }
                                    }(document, 'script', 'pd-rating-js'));
                                </script>
                            </div>
                            
                        </section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
    <ul class="nav jsTOCHorizontal hidden-md hidden-lg">
    </ul>
    <div class="divider hidden-md hidden-lg"></div>
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul>
                                        
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/app/working-with-app.md"><i
                                                    class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/issues/new?body=ファイル: [app/working-with-app.md](https://matsuand.github.io/docs.docker.jp.onthefly/app/working-with-app/)"
                                                class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
                                        <!-- toggle mode -->
                                        <li>
                                            <div class="toggle-mode">
                                                <div class="icon">
                                                    <i class="fa fa-sun-o" aria-hidden="true"></i>
                                                </div>
                                                <div class="toggle-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" id="switch-style">
                                                        <div class="slider round"></div>
                                                    </label>
                                                </div>
                                                <div class="icon">
                                                    <i class="fa fa-moon-o" aria-hidden="true"></i>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                
                                
                                
                                
                                <div id="side-toc-title">本ページ内:</div>
                                
<ul id="my_toc" class="inline_toc">
  <li><a href="#overview" class="nomunge">概要</a></li>
  <li><a href="#initialize-and-deploy-a-new-docker-app-project-from-scratch" class="nomunge">Initialize and deploy a new Docker App project from scratch</a>
    <ul>
      <li><a href="#prerequisites" class="nomunge">Prerequisites</a></li>
      <li><a href="#initialize-a-new-empty-project" class="nomunge">Initialize a new empty project</a></li>
      <li><a href="#populate-the-project" class="nomunge">Populate the project</a></li>
      <li><a href="#validate-the-app" class="nomunge">Validate the app</a></li>
      <li><a href="#deploy-the-app" class="nomunge">Deploy the app</a></li>
      <li><a href="#push-the-app-to-docker-hub" class="nomunge">Push the app to Docker Hub</a></li>
      <li><a href="#install-the-app-directly-from-docker-hub" class="nomunge">Install the app directly from Docker Hub</a></li>
    </ul>
  </li>
</ul>


                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker?</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container?</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Play with Docker</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2020 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
    
    <script>var pageURL = "/app/working-with-app/";</script>
    <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
    <script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
    <script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
    <script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
    <script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
    <script defer src="/js/search.js"></script>
</body>


</html>
